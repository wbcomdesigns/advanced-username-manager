($=>{$(document).ready(function(){$(document).on("click","#username_change_submit",function(e){e.preventDefault();e={action:"aum_update_username",nonce:aum_options.ajax_nonce,new_user_name:$("#aum_new_user_name").val(),current_user_name:$("#aum_current_user_name").val(),bp_is_my_profile:$("#bp_is_my_profile").val()};$.ajax({url:aum_options.ajaxurl,data:e,type:"post",dataType:"json",success:function(response){var redirect_url;$("form.aum-standard-form p.aum-error").remove(),$("form.aum-standard-form p.aum-success").remove(),1==response.success?($("form.aum-standard-form #aum_new_user_input_field").after('<p class="aum-success">'+response.data.success_message+"</p>"),""!==response.data.redirect_url&&(redirect_url=response.data.redirect_url,setTimeout(function(){window.location.href=redirect_url},5e3))):$("form.aum-standard-form #aum_new_user_input_field").after('<p class="aum-error">'+response.data.error_message+"</p>")}})}),$(document).on("keyup","#aum_new_user_name",function(e){console.log($(this).val());var username=$(this).val(),min_length=aum_options.min_username_length;let message="",isValid=!0;username.length<min_length&&(message+='<p class="aum-error">'+aum_options.min_username_error+"</p>",isValid=!1),aum_options.max_username_length<username.length&&(message+='<p class="aum-error">'+aum_options.max_username_error+"</p>",isValid=!1),$("form.aum-standard-form p.aum-error").remove(),$("form.aum-standard-form p.aum-success").remove(),isValid?($("form.aum-standard-form p.aum-error").remove(),$("form.aum-standard-form p.aum-success").remove(),$("#username_change_submit").removeAttr("disabled"),2<=username.length?$.ajax({url:aum_options.ajaxurl,type:"post",dataType:"json",data:{action:"check_username_availability",nonce:aum_options.ajax_nonce,username:username},success:function(response){var suggestions,suggestionList;$("form.aum-standard-form p.aum-success").remove(),$("form.aum-standard-form p.aum-error").remove(),0==response.data.available?(suggestions=response.data.suggestions,suggestionList="",0<suggestions.length&&(suggestions.forEach(function(item){suggestionList+='<li style="padding: 5px; cursor: pointer;">'+item+"</li>"}),$("#aum-autocomplete-suggestions").html(suggestionList).show()),$("form.aum-standard-form #aum_new_user_input_field").after('<p class="aum-error">'+response.data.message+"</p>")):1==response.data.available&&($("form.aum-standard-form #aum_new_user_input_field").after('<p class="aum-success">'+response.data.message+"</p>"),$("#aum-autocomplete-suggestions").hide())}}):$("#aum-autocomplete-suggestions").hide()):($("form.aum-standard-form #aum_new_user_input_field").after(message),$("#username_change_submit").attr("disabled","disabled"))}),$(document).on("click","#aum-autocomplete-suggestions li",function(){$("#aum_new_user_name").val($(this).text()),$("#aum-autocomplete-suggestions").hide(),$("form.aum-standard-form p.aum-error").remove()})})})(jQuery);